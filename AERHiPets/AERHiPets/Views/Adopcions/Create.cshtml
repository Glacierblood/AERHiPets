@using Microsoft.AspNet.Identity
@using Microsoft.AspNet.Identity.Owin
@model AERHiPets.Models.GestionAdopcionApadrinamiento.Models.Adoptar

<div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 fondo textoParrafo centrarContenido">
        @{
            ViewBag.Title = "Adoptar";
        }

        <h2 class="textoTitulo"><strong>Nueva solicitud de adopción</strong></h2>
@using (Html.BeginForm())
                    {
    @Html.AntiForgeryToken()
        <div class="container">
            <div class="row textoParrafo">
                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">

                    

                        <div class="form-horizontal">
                            <div class="alert alert-info">
                                <strong>Completar los datos con asterisco!</strong>
                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            </div>

                            <script src="~/scripts/jquery-1.10.2.min.js"></script>
                            <script type="text/javascript">
                                $(document).ready(function () {
                                    $.validator.setDefaults({ ignore: null });
                                    $("input[name=selectedAnimalId").change(function () {
                                        //cada vez que el estado de un radio button cambia, asignamos a nuestro campo hiden el valor del readio seleccionado, que en este caso es el id del animal seleccionado
                                        $("#adopcion_animalId").val($('input[name=selectedAnimalId]:checked').val());
                                    })
                                    $("#adopcion_tipoAdopcionId").change(function () {
                                        var valorSeleccionado = $("#adopcion_tipoAdopcionId").val();
                                        if (valorSeleccionado == '2') {
                                            $('#adopcion_fechaFin').prop("disabled", true);;
                                        }
                                        else {
                                            $('#adopcion_fechaFin').prop("disabled", false);;
                                        }

                                    })


                                });

                            </script>


                            <table class="table textoTabla" id="myTable">
                                <thead>
                                    <tr>
                                        <th class="col-sm-2 col-xs-3">
                                            @Html.DisplayNameFor(model => model.animal.nombre)
                                        </th>
                                        <th class="hidden-sm hidden-xs">
                                            @Html.DisplayNameFor(model => model.animal.raza.nombre)
                                        </th>
                                        <th class="hidden-sm hidden-xs">
                                            @Html.DisplayNameFor(model => model.animal.raza.especie.nombre)
                                        </th>
                                        <th class="hidden-sm hidden-xs">
                                            @Html.DisplayNameFor(model => model.animal.tamanio.nombre)
                                        </th>
                                        <th class="col-sm-1 hidden-xs">
                                            @Html.DisplayNameFor(model => model.animal.edad)
                                        </th>
                                        <th class="hidden-sm hidden-xs">
                                            @Html.DisplayNameFor(model => model.animal.caracteristicas)
                                        </th>
                                        <th></th>
                                        <th>foto</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.animales)
                                    {
                                        <tr>
                                            <td class="col-sm-2 col-xs-3">
                                                @Html.DisplayFor(modelItem => item.nombre)
                                            </td>
                                            <td class="hidden-sm hidden-xs">
                                                @Html.DisplayFor(modelItem => item.raza.nombre)
                                            </td>
                                            <td class="hidden-sm hidden-xs">
                                                @Html.DisplayFor(modelItem => item.raza.especie.nombre)
                                            </td>
                                            <td class="hidden-sm hidden-xs">
                                                @Html.DisplayFor(modelItem => item.tamanio.nombre)
                                            </td>
                                            <td class="col-sm-1 hidden-xs">
                                                @Html.DisplayFor(modelItem => item.edad)
                                            </td>
                                            <td class="hidden-sm hidden-xs">
                                                @Html.DisplayFor(modelItem => item.caracteristicas)
                                            </td>
                                            <td class="col-lg-2 col-xs-3">
                                                @Html.RadioButton("selectedAnimalId", item.Id)
                                            </td>
                                            <td class="col-lg-2 col-xs-2">
                                                @if (item.Files.Any(f => f.FileType == AERHiPets.Models.GestionAnimal.GestionAnimalImagenes.FileType.Avatar))
                                                {


                                                    <img src="~/File?id=@item.Files.First(f => f.FileType == AERHiPets.Models.GestionAnimal.GestionAnimalImagenes.FileType.Avatar).FileId" alt="avatar" height="50" width="50" class="img-responsive" />

                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>

                            </table>

                            <!--DATOS DE REGISTRO DE LA SOLICITUD DE ADOPCIÓN-->
                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">

                                @*****************************************************************************************************************@

                                <div class="form-group">
                                    @*@Html.LabelFor(model => model.atencionMedica.animalId, "animalId", htmlAttributes: new { @class = "control-label col-md-2"})*@
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.adopcion.animalId, new { htmlAttributes = new { @class = "form-control", @type = "hidden", @Id = "adopcion_animalId" } })
                                        @Html.ValidationMessageFor(model => model.adopcion.animalId, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                @*****************************************************************************************************************@

                                <div class="form-group">
                                    @*@Html.LabelFor(model => model.adopcion.voluntarioId, htmlAttributes: new { @class = "control-label col-md-2" })*@
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.adopcion.voluntario.UsrId, new { htmlAttributes = new { @class = "form-control", @Value = User.Identity.GetUserId(), @type = "hidden" } })
                                        @Html.ValidationMessageFor(model => model.adopcion.voluntarioId, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @* @Html.LabelFor(model => model.adopcion.nombreVoluntario, htmlAttributes: new { @class = "control-label col-md-2" })*@
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.adopcion.voluntario.Nombre, new { htmlAttributes = new { @class = "form-control", @Value = User.Identity.GetUserName(), @type = "hidden" } })
                                        @Html.ValidationMessageFor(model => model.adopcion.voluntario.Nombre, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                @*****************************************************************************************************************@



                                <div class="form-group">
                                    @Html.LabelFor(model => model.adopcion.tipoAdopcionId, "tipoAdopcionId", htmlAttributes: new { @class = "control-label col-lg-4 col-md-4 col-sm-4 hidden-xs" })
                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-10 form-inline">
                                        @Html.DropDownListFor(model => model.adopcion.tipoAdopcionId, ViewBag.tipoAdopcionId as SelectList, htmlAttributes: new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.adopcion.tipoAdopcionId, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.adopcion.fechaFin, htmlAttributes: new { @class = "control-label col-lg-4 col-md-4 col-sm-4 hidden-xs" })
                                    <div class="col-lg-4 col-md-4 col-sm-4 hidden-xs form-inline">
                                        @Html.EditorFor(model => model.adopcion.fechaFin, new { htmlAttributes = new { @class = "form-control", placeholder = "Fecha fin tenencia temporal" } })
                                        @Html.ValidationMessageFor(model => model.adopcion.fechaFin, "", new { @class = "text-danger" })
                                    </div>
                                </div>



                                @*****************************************************************************************************************@
                                @*



                                    <div class="form-group">
                                               @Html.LabelFor(model => model.adopcion.esTemporal, htmlAttributes: new { @class = "control-label col-md-2" })
                                               <div class="col-md-10">
                                                   <div class="checkbox">
                                                       @Html.EditorFor(model => model.adopcion.esTemporal)
                                                       @Html.ValidationMessageFor(model => model.adopcion.esTemporal, "", new { @class = "text-danger" })
                                                   </div>
                                               </div>
                                           </div>

                                                       <div class="form-group">
                                               @Html.LabelFor(model => model.adopcion.dias, htmlAttributes: new { @class = "control-label col-md-2" })
                                               <div class="col-md-10">
                                                   @Html.EditorFor(model => model.adopcion.dias, new { htmlAttributes = new { @class = "form-control" } })
                                                   @Html.ValidationMessageFor(model => model.adopcion.dias, "", new { @class = "text-danger" })
                                               </div>
                                           </div>
                                               <div class="form-group">
                                               @Html.LabelFor(model => model.adopcion.tipoAdopcionId, "tipoAdopcionId", htmlAttributes: new { @class = "control-label col-md-2" })
                                               <div class="col-md-10">
                                                   @Html.DropDownListFor(model => model.adopcion.tipoAdopcionId, ViewBag.tipoAdopcionId as SelectList, htmlAttributes: new { @class = "form-control" })
                                                   @Html.ValidationMessageFor(model => model.adopcion.tipoAdopcionId, "", new { @class = "text-danger" })
                                               </div>
                                           </div>

                                           <div class="form-group">
                                                   @Html.LabelFor(model => model.adopcion.tipoAdopcionId, "tipoAdopcionId", htmlAttributes: new { @class = "control-label col-md-2" })
                                                   <div class="col-md-10">
                                                       @Html.DropDownListFor(model => model.adopcion.tipoAdopcionId, ViewBag.tipoAdopcionId as SelectList, htmlAttributes: new { @class = "form-control" })
                                                       @Html.ValidationMessageFor(model => model.adopcion.tipoAdopcionId, "", new { @class = "text-danger" })
                                                   </div>
                                               </div>

                                           <div class="form-group">
                                               @Html.LabelFor(model => model.adopcion.estadoAdopcionId, "estadoAdopcionId", htmlAttributes: new { @class = "control-label col-md-2" })
                                               <div class="col-md-10">
                                                   @Html.DropDownList("estadoAdopcionId", null, htmlAttributes: new { @class = "form-control" })
                                                   @Html.ValidationMessageFor(model => model.adopcion.estadoAdopcionId, "", new { @class = "text-danger" })
                                               </div>
                                           </div>

                                           <div class="form-group">
                                               @Html.LabelFor(model => model.adopcion.fechaEntrega, htmlAttributes: new { @class = "control-label col-md-2" })
                                               <div class="col-md-10">
                                                   @Html.EditorFor(model => model.adopcion.fechaEntrega, new { htmlAttributes = new { @class = "form-control" } })
                                                   @Html.ValidationMessageFor(model => model.adopcion.fechaEntrega, "", new { @class = "text-danger" })
                                               </div>
                                           </div>



                                           @*****************************************************************************************************************@
                                @*
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.adopcion.direccion.calle, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-md-10">
                                                @Html.EditorFor(model => model.adopcion.direccion.calle, new { htmlAttributes = new { @class = "form-control" } })
                                                @Html.ValidationMessageFor(model => model.adopcion.direccion.calle, "", new { @class = "text-danger" })
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            @Html.LabelFor(model => model.adopcion.direccion.depto, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-md-10">
                                                @Html.EditorFor(model => model.adopcion.direccion.depto, new { htmlAttributes = new { @class = "form-control" } })
                                                @Html.ValidationMessageFor(model => model.adopcion.direccion.depto, "", new { @class = "text-danger" })
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            @Html.LabelFor(model => model.adopcion.direccion.piso, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-md-10">
                                                @Html.EditorFor(model => model.adopcion.direccion.piso, new { htmlAttributes = new { @class = "form-control" } })
                                                @Html.ValidationMessageFor(model => model.adopcion.direccion.piso, "", new { @class = "text-danger" })
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            @Html.LabelFor(model => model.adopcion.direccion.Torre, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-md-10">
                                                @Html.EditorFor(model => model.adopcion.direccion.Torre, new { htmlAttributes = new { @class = "form-control" } })
                                                @Html.ValidationMessageFor(model => model.adopcion.direccion.Torre, "", new { @class = "text-danger" })
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            @Html.LabelFor(model => model.adopcion.direccion.barrioId, "Barrio", htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-md-10">
                                                @Html.DropDownListFor(model => model.adopcion.direccion.barrioId, ViewBag.barrioId as SelectList, htmlAttributes: new { @class = "form-control" })
                                                @Html.ValidationMessageFor(model => model.adopcion.direccion.barrioId, "", new { @class = "text-danger" })
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            @Html.LabelFor(model => model.adopcion.direccion.barrio.localidadId, "Localidad", htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-md-10">
                                                @Html.DropDownListFor(model => model.adopcion.direccion.barrio.localidadId, ViewBag.localidadId as SelectList, htmlAttributes: new { @class = "form-control" })
                                                @Html.ValidationMessageFor(model => model.adopcion.direccion.barrio.localidadId, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                    @*****************************************************************************************************************@
                            </div>

                            <!--IMAGEN-->
                            <div class="col-lg-4 col-md-4 col-sm-4 hidden-xs">
                                <img src="~/img/imagenAdoptar.png" />
                            </div>
                        </div>
                </div>

                <!--BOTON GUARDAR ANIMAL-->
                <div class="container">
                    <div class="row" align="center">
                        <div class="form-group">
                            <div class="col-md-10 centrarContenido">
                                <input type="submit" value="Guardar" class="btn btn-danger btn-lg btn-block set-bk-clr colorBase textoMenu" />
                            </div>
                        </div>
                    </div>
                    <div class="row" align="right">
                        <div class="col-lg-10 col-md-10">
                            @Html.ActionLink("Ir a la lista", "Index")
                        </div>

                    </div>
                </div>


            </div>
        </div>
        }
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
